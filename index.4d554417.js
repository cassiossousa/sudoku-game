class e{constructor(e,t,i){this.row=e,this.col=t,this.value=i,this.element=null,this.pencilMarks=[]}render(){let e=document.createElement("div");return e.classList.add("tile"),this.value&&(e.textContent=this.value),this.element=e,e}}class t{constructor(e){this.element=e,this.board=Array.from({length:9},()=>Array(9).fill(null))}restart(t){this.board=Array.from({length:9},()=>Array(9).fill(null));for(let i=0;i<9;i++)for(let l=0;l<9;l++){let s;s=t&&t[i]&&t[i][l]?new e(i,l,t[i][l]):new e(i,l,null),this.board[i][l]=s}}render(){let e=document.createElement("div");e.classList.add("board");for(let t=0;t<3;t++){let i=document.createElement("div");i.classList.add("board-row"),e.appendChild(i);for(let e=0;e<3;e++){let l=document.createElement("div");l.classList.add("box"),i.appendChild(l);for(let i=0;i<3;i++){let s=document.createElement("div");s.classList.add("box-row"),l.appendChild(s);for(let l=0;l<3;l++){let a=3*t+i,d=3*e+l,o=this.board[a][d].render();s.appendChild(o)}}}}return e}update(){let e=this.render(),t=this.element.parentNode;t.removeChild(this.element),this.element=e,t.appendChild(this.element)}}new class{constructor(e,t){this.boardElement=e,this.initialValues=t,this.sudoku=null,this.activeTileRow=null,this.activeTileCol=null,this.keypadEl=document&&document.querySelector("div.keypad")}start(){this.sudoku=new t(this.boardElement),this.sudoku.restart(this.initialValues),this.updateSudoku(),this.addListenersToKeypad()}updateSudoku(){this.sudoku.update(),this.addListenersAndValidatorsToSudokuTiles()}addListenersAndValidatorsToSudokuTiles(){for(let e=0;e<9;e++)for(let t=0;t<9;t++){let i=this.sudoku.board[e][t];this.isInitial(i)?i.element.classList.add("initial"):i.element.addEventListener("click",()=>this.toggleActivateTile(i)),null===i.value||this.isValidMove(e,t,i.value)||i.element.classList.add("invalid")}}isInitial(e){return!!(e&&e.value&&this.initialValues[e.row][e.col]===e.value)}toggleActivateTile(e){if(this.activeTileRow===e.row&&this.activeTileCol===e.col)e.element.classList.remove("active"),this.activeTileRow=null,this.activeTileCol=null,this.keypadEl.classList.add("hidden");else if(this.deactivateTile(),e.element.classList.add("active"),this.activeTileRow=e.row,this.activeTileCol=e.col,this.keypadEl){let t=e.element.getBoundingClientRect();this.repositionKeypad(t,this.activeTileRow,this.activeTileCol),this.keypadEl.classList.remove("hidden")}}deactivateTile(){null!==this.activeTileRow&&null!==this.activeTileCol&&(this.sudoku.board[this.activeTileRow][this.activeTileCol].element.classList.remove("active"),this.activeTileRow=null,this.activeTileCol=null)}addListenersToKeypad(){this.keypadEl&&(this.keypadEl.addEventListener("click",e=>{if(null===this.activeTileRow||null===this.activeTileCol)return;let t=this.sudoku.board[this.activeTileRow][this.activeTileCol],i=e.target.dataset.key;"clear"===i?t.value=null:i&&(t.value=parseInt(i,10)),this.keypadEl.classList.add("hidden"),this.deactivateTile(),this.updateSudoku()}),document&&document.addEventListener("click",e=>{e.target.closest("div.tile")||e.target.closest("div.keypad")||(this.keypadEl.classList.add("hidden"),this.deactivateTile())}))}repositionKeypad(e,t,i){this.keypadEl&&(t<4?this.keypadEl.style.top=`${e.bottom-e.height/2+window.scrollY}px`:this.keypadEl.style.top=`${e.top+e.height/2+window.scrollY-this.keypadEl.clientHeight}px`,i<4?this.keypadEl.style.left=`${e.right-e.width/2+window.scrollX}px`:this.keypadEl.style.left=`${e.left+e.width/2+window.scrollX-this.keypadEl.clientWidth}px`)}isValidMove(e,t,i){let l=this.sudoku.board;for(let s=0;s<9;s++)if(l[e][s].value===i&&s!==t)return!1;for(let s=0;s<9;s++)if(l[s][t].value===i&&s!==e)return!1;let s=3*Math.floor(e/3),a=3*Math.floor(t/3);for(let d=s;d<s+3;d++)for(let s=a;s<a+3;s++)if(l[d][s].value===i&&d!==e&&s!==t)return!1;return!0}}(document.querySelector(".board"),[[0,0,0,3,8,0,0,5,6],[3,0,0,0,0,6,0,0,0],[0,0,0,0,4,0,0,3,0],[8,0,7,0,0,0,0,0,1],[0,0,1,0,7,0,9,0,0],[9,0,0,0,0,0,2,0,4],[0,7,0,0,9,0,0,0,0],[0,0,0,4,0,0,0,0,3],[1,4,0,0,2,5,0,0,0]]).start();
//# sourceMappingURL=index.4d554417.js.map
